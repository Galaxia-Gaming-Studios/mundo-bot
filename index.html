<!DOCTYPE html>  
<html lang="es">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Kirito Bot Web</title>  
    <link rel="stylesheet" href="estilos.css">  
    <meta property="og:title" content="Kirito Bot Web">  
    <meta property="og:description" content="Alquila o compra tu bot personalizado con Kirito-Bot.">  
    <meta property="og:image" content="https://qu.ax/ktODx.jpg">  
    <meta property="og:url" content="https://deylinqff.github.io/Kirito-Bot-web/">  
    <meta property="og:type" content="website">  
    <meta name="twitter:card" content="summary_large_image">  
    <meta name="twitter:title" content="Kirito Bot Web">  
    <meta name="twitter:description" content="Alquila o compra tu bot personalizado con Kirito-Bot.">  
    <meta name="twitter:image" content="https://qu.ax/ktODx.jpg">  
    <style>
        /* Estilos del chat de la IA */
        #ia-chat {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            height: 400px;
            z-index: 1000;
        }

        #ia-chat .chat-box {
            height: 300px;
            overflow-y: auto;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        #ia-chat .input-group {
            display: flex;
        }

        #ia-chat .input-group input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        #ia-chat .input-group button {
            padding: 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #ia-chat .input-group button:hover {
            background-color: #45a049;
        }

        #ia-chat .message.user {
            text-align: right;
            color: #007bff;
        }

        #ia-chat .message.ia {
            text-align: left;
            color: #333;
        }
    </style>
</head>  
<body>  

<!-- Botón flotante para abrir el chat de la IA -->
<button class="floating-btn" onclick="toggleIAChat()">IA</button>

<!-- Chat de la IA -->
<div id="ia-chat">
    <div class="chat-box" id="chat-box"></div>
    <div class="input-group">
        <input type="text" id="user-input" placeholder="Escribe tu mensaje...">
        <button id="send-btn">Enviar</button>
    </div>
</div>

<script>
    function toggleIAChat() {
        const chat = document.getElementById("ia-chat");
        chat.style.display = (chat.style.display === "none" || chat.style.display === "") ? "block" : "none";
    }

    function appendMessage(message, sender) {
        const chatBox = document.getElementById("chat-box");
        const newMessage = document.createElement("div");
        newMessage.textContent = message;
        newMessage.className = 'message ' + sender;
        chatBox.appendChild(newMessage);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendMessage() {
        const userInput = document.getElementById("user-input").value;
        if (userInput.trim()) {
            appendMessage("Tú: " + userInput, "user");
            document.getElementById("user-input").value = '';

            try {
                const response = await fetch(`https://apis-starlights-team.koyeb.app/starlight/gemini?text=${encodeURIComponent(userInput)}`);
                const data = await response.json();
                
                // Ver qué devuelve la API
                console.log("Respuesta de la API:", data);

                // Intentar mostrar la respuesta correcta
                appendMessage("IA: " + (data.respuesta || JSON.stringify(data)), "ia");
            } catch (error) {
                console.error("Error al obtener la respuesta:", error);
                appendMessage("IA: Error al obtener la respuesta", "ia");
            }
        }
    }

    document.getElementById("send-btn").addEventListener("click", sendMessage);
</script>

</body>
</html>